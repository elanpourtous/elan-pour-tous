<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Checklist RGAA ‚Äì √âlan pour tous</title>
  <meta name="description" content="Auto-√©valuation RGAA 4.1 du site √âlan pour tous, micro-entreprise √† Saumur.">
  <link rel="icon" href="assets/ima/logo.png" type="image/png">
  <link rel="stylesheet" href="assets/css/style.css">
  <link rel="stylesheet" href="assets/css/rgaa-accessible.css">
</head>

<body>
  <a href="#contenu" class="skip-link">Aller au contenu</a>
  <div id="header-placeholder" role="banner"></div>

  <main id="contenu" class="container hero" role="main">
    <h1>Checklist RGAA ‚Äì √âlan pour tous</h1>
    <p>
      Auto-√©valuation de l‚Äôaccessibilit√© du site web, bas√©e sur le <strong>RGAA 4.1 (niveau AA)</strong>.<br>
      <strong>Micro-entreprise :</strong> √âlan pour tous ‚Äî Saumur (49)
    </p>

    <section>
      <h2>1. Structure et navigation</h2>
      <table class="rgaa-table">
        <thead>
          <tr><th>Crit√®re</th><th>Description</th><th>√âtat</th></tr>
        </thead>
        <tbody>
          <tr><td>1.1</td><td>Titre de page pertinent et unique</td><td>‚úî Conforme</td></tr>
          <tr><td>1.2</td><td>Structure des titres (h1 √† h6) hi√©rarchis√©e</td><td>‚úî Conforme</td></tr>
          <tr><td>1.3</td><td>Lien d‚Äô√©vitement vers le contenu principal</td><td>‚úî Conforme</td></tr>
          <tr><td>1.4</td><td>Navigation clavier compl√®te et visible</td><td>‚úî Conforme</td></tr>
          <tr><td>1.5</td><td>Menu de navigation accessible (ARIA roles...)</td><td>‚óê Partiel</td></tr>
        </tbody>
      </table>
    </section>

    <section>
      <h2>2. Contenus et m√©dias</h2>
      <table class="rgaa-table">
        <thead>
          <tr><th>Crit√®re</th><th>Description</th><th>√âtat</th></tr>
        </thead>
        <tbody>
          <tr><td>2.1</td><td>Images porteuses d‚Äôinformation avec alt</td><td>‚úî Conforme</td></tr>
          <tr><td>2.2</td><td>Images d√©coratives ignor√©es (alt vide)</td><td>‚úî Conforme</td></tr>
          <tr><td>2.3</td><td>Contrastes couleur (‚â• 4.5:1)</td><td>‚úî Conforme</td></tr>
          <tr><td>2.4</td><td>Contraste images de fond</td><td>‚óê √Ä v√©rifier</td></tr>
        </tbody>
      </table>
    </section>

    <section>
      <h2>3. Interaction et formulaires</h2>
      <table class="rgaa-table">
        <thead>
          <tr><th>Crit√®re</th><th>Description</th><th>√âtat</th></tr>
        </thead>
        <tbody>
          <tr><td>3.1</td><td>Labels associ√©s, focus visible, messages d‚Äôerreur</td><td>‚úî Conforme</td></tr>
          <tr><td>3.2</td><td>Validation non bloquante pour le clavier</td><td>‚úî Conforme</td></tr>
        </tbody>
      </table>
    </section>

    <section>
      <h2>4. Composants dynamiques</h2>
      <table class="rgaa-table">
        <thead>
          <tr><th>Crit√®re</th><th>Description</th><th>√âtat</th></tr>
        </thead>
        <tbody>
          <tr><td>4.1</td><td>Th√®me sombre/clair via prefers-color-scheme</td><td>‚úî Conforme</td></tr>
          <tr><td>4.2</td><td>Boutons d‚Äôaccessibilit√© (taille police, contraste, espacement)</td><td>‚úî Conforme</td></tr>
          <tr><td>4.3</td><td>Persistance des pr√©f√©rences utilisateur</td><td>‚óê En test</td></tr>
        </tbody>
      </table>
    </section>

    <section>
      <h2>5. Tests utilisateurs</h2>
      <table class="rgaa-table">
        <thead>
          <tr><th>Sc√©nario</th><th>R√©sultat</th><th>√âtat</th></tr>
        </thead>
        <tbody>
          <tr><td>Navigation clavier seule</td><td>OK ‚Äì tous les liens atteignables</td><td>‚úî</td></tr>
          <tr><td>Lecteur d‚Äô√©cran (NVDA)</td><td>Lecture fluide des titres et des liens</td><td>‚úî</td></tr>
          <tr><td>Contraste √©lev√©</td><td>Lisibilit√© maintenue</td><td>‚úî</td></tr>
          <tr><td>Zoom 200 %</td><td>Aucun chevauchement</td><td>‚úî</td></tr>
        </tbody>
      </table>
    </section>

    <section>
      <h2>6. Conclusion</h2>
      <p>
        Site √©valu√© comme <strong>partiellement conforme au RGAA 4.1 (niveau AA)</strong>, 
        avec un haut niveau d‚Äôaccessibilit√© g√©n√©rale.
      </p>
      <p>
        <strong>Derni√®re v√©rification :</strong> 01/11/2025<br>
        ¬© 2025 <strong>√âlan pour tous</strong> ‚Äî Auto-√©valuation RGAA r√©alis√©e par Patrick Billy, micro-entreprise √† Saumur (49).
      </p>
    </section>

    <!-- üó£Ô∏è Contr√¥les de lecture (TTS) -->
    <div class="reader-controls" role="region" aria-label="Lecture √† voix haute">
      <button id="readStart" class="btn">üîä Lire</button>
      <button id="readPause" class="btn">‚è∏Ô∏è Pause</button>
      <button id="readResume" class="btn">‚ñ∂Ô∏è Reprendre</button>
      <button id="readStop" class="btn">‚èπÔ∏è Stop</button>

      <label for="readRate">Vitesse :</label>
      <input id="readRate" type="range" min="0.5" max="2" step="0.1" value="1">
      <span id="rateVal" aria-live="polite">1.0√ó</span>
    </div>
  </main>

  <div id="footer-placeholder" role="contentinfo"></div>

  <!-- Injection header/footer + scripts -->
  <script>
    function includeInto(id, url) {
      return fetch(url, { cache: "no-store" })
        .then(r => { if(!r.ok) throw new Error(url+" introuvable"); return r.text(); })
        .then(h => { document.getElementById(id).innerHTML = h; });
    }
    Promise.all([
      includeInto("header-placeholder", "assets/header.html"),
      includeInto("footer-placeholder", "assets/footer.html")
    ]).then(() => {
      // met en surbrillance l'onglet courant
      const current = (location.pathname.split('/').pop() || 'index.html').toLowerCase();
      document.querySelectorAll('.nav-links a').forEach(a => {
        if ((a.getAttribute('href')||'').toLowerCase() === current) {
          a.setAttribute('aria-current','page'); a.classList.add('active');
        }
      });
      const s1=document.createElement('script'); s1.src='assets/js/main.js'; s1.defer=true; document.body.appendChild(s1);
      const s2=document.createElement('script'); s2.src='assets/js/accessibilite.js'; s2.defer=true; document.body.appendChild(s2);
    }).catch(err=>console.error('Erreur d‚Äôinclusion :', err));
  </script>

  <!-- üîä Lecture vocale accessible (native SpeechSynthesis) -->
  <script>
    (function(){
      const synth = window.speechSynthesis;
      const area  = document.querySelector('main'); // on lit tout le contenu principal
      const el = {
        start:  document.getElementById('readStart'),
        pause:  document.getElementById('readPause'),
        resume: document.getElementById('readResume'),
        stop:   document.getElementById('readStop'),
        rate:   document.getElementById('readRate'),
        rateVal:document.getElementById('rateVal')
      };
      let utt = null;

      function speak(){
        try {
          if (synth.speaking) synth.cancel();
          const text = area.innerText.trim();
          if (!text) return;

          utt = new SpeechSynthesisUtterance(text);
          utt.lang = 'fr-FR';
          utt.rate = parseFloat(el.rate.value || '1');
          synth.speak(utt);
        } catch(e) {
          console.error(e);
        }
      }
      function pause(){ if (synth.speaking && !synth.paused) synth.pause(); }
      function resume(){ if (synth.paused) synth.resume(); }
      function stop(){ synth.cancel(); }

      el.start.addEventListener('click', speak);
      el.pause.addEventListener('click', pause);
      el.resume.addEventListener('click', resume);
      el.stop.addEventListener('click', stop);
      el.rate.addEventListener('input', e => { el.rateVal.textContent = (+e.target.value).toFixed(1) + '√ó'; });

      // Raccourci clavier : Ctrl + Espace => pause/reprise
      document.addEventListener('keydown', e => {
        if (e.code === 'Space' && (e.ctrlKey || e.metaKey)) {
          e.preventDefault();
          if (synth.paused) resume(); else pause();
        }
      });

      // Nettoyage quand on change de page
      window.addEventListener('beforeunload', stop);
    })();
  </script>

  <!-- Petit style local si pas d√©j√† pr√©sent dans rgaa-accessible.css -->
  <style>
    .reader-controls{
      display:flex; align-items:center; gap:.5rem; flex-wrap:wrap;
      border-top:1px solid var(--border); margin-top:2rem; padding-top:.75rem;
    }
    .reader-controls .btn{
      background:var(--brand); color:#fff; border:none; border-radius:.5rem;
      padding:.4rem .8rem; cursor:pointer; font-weight:700;
    }
    .reader-controls .btn:hover{ filter:brightness(1.1); }
    .reader-controls input[type="range"]{ accent-color:var(--brand); }
  </style>
</body>
</html>
