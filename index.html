<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Ã‰lan pour tous â€” micro-entreprise Ã  Saumur (49) proposant des formations et services accessibles Ã  tous publics.">
  <meta name="theme-color" content="#0b8457">
  <title>Ã‰lan pour tous - Accueil</title>

  <!-- Favicon & prÃ©chargements utiles -->
  <link rel="icon" href="assets/ima/logo.png" type="image/png">
  <link rel="preload" as="image" href="assets/ima/baa.png" imagesrcset="assets/ima/baa.png">

  <!-- Feuilles de style principales -->
  <link rel="stylesheet" href="assets/css/style.css">
  <link rel="stylesheet" href="assets/css/rgaa-accessible.css">
  <!-- CSS de la barre TTS (Ã©vite le flash sans style) -->
  <link rel="stylesheet" href="assets/css/tts.min.css"><!-- ou tts.dev.css en dev -->
</head>

<body>
  <!-- Lien dâ€™Ã©vitement pour navigation clavier -->
  <a href="#contenu" class="skip-link">Aller directement au contenu</a>

  <!-- HEADER chargÃ© dynamiquement -->
  <div id="header-placeholder" role="banner" aria-label="En-tÃªte du site"></div>

  <!-- ðŸŒŸ Contenu principal -->
  <main id="contenu" class="container hero" role="main" tabindex="-1">
    <img src="assets/ima/baa.png" alt="Logo Ã‰lan pour tous" class="hero-logo" width="180" height="180" decoding="async">
    <h1>Ã‰lan pour tous</h1>
    <p class="tagline">Micro-entreprise basÃ©e Ã  Saumur (49) â€” formations et services inclusifs pour tous publics.</p>
    <p>Accompagner chacunÂ·e dans son parcours dâ€™apprentissage, de reconversion et dâ€™Ã©panouissement personnel ou professionnel.</p>
    <a href="formations.html" class="btn btn-primary">DÃ©couvrir nos formations</a>
  </main>

  <!-- FOOTER chargÃ© dynamiquement -->
  <div id="footer-placeholder" role="contentinfo" aria-label="Pied de page"></div>

  <noscript>
    <p role="alert">Le JavaScript est dÃ©sactivÃ© : lâ€™en-tÃªte et le pied de page dynamiques ne seront pas chargÃ©s.</p>
  </noscript>

  <!-- ============================= -->
  <!-- ðŸ”— INJECTION HEADER + FOOTER + SCRIPTS -->
  <!-- ============================= -->
  <script>
    (function () {
      // utilitaire dâ€™inclusion HTML
      async function includeInto(id, url) {
        const host = document.getElementById(id);
        if (!host) throw new Error('Conteneur manquant : #' + id);
        const res = await fetch(url, { cache: 'no-store' });
        if (!res.ok) throw new Error(url + ' introuvable (' + res.status + ')');
        const html = await res.text();
        host.innerHTML = html;
      }

      // Assure le focus du skip-link sur #contenu
      const skip = document.querySelector('.skip-link');
      if (skip) {
        skip.addEventListener('click', () => {
          const main = document.getElementById('contenu');
          if (main) requestAnimationFrame(() => main.focus());
        });
      }

      // Charge header + footer, puis les scripts
      Promise.all([
        includeInto('header-placeholder', 'assets/header.html'),
        includeInto('footer-placeholder', 'assets/footer.html')
      ])
      .then(() => {
        // Scripts du site (dÃ©fÃ©rÃ©s)
        const scripts = [
          'assets/js/include.js',       // â€œtout-en-unâ€ (menu, thÃ¨me, accessibilitÃ©, toggle TTS)
          // 'assets/js/main.js',       // si nÃ©cessaire
          // 'assets/js/accessibilite.js', // superflu si include.js regroupe dÃ©jÃ 
          'assets/js/tts.min.js'        // ou 'assets/js/tts.dev.js' en dev
        ];
        scripts.forEach(src => {
          const s = document.createElement('script');
          s.src = src;
          s.defer = true;
          document.body.appendChild(s);
        });
      })
      .catch(err => {
        console.error('Erreur dâ€™inclusion :', err);
        // Fallback minimal si le footer ne charge pas
        const fp = document.getElementById('footer-placeholder');
        if (fp && !fp.innerHTML.trim()) {
          fp.innerHTML = '<footer class="site-footer"><p style="padding:1rem">Â© Ã‰lan pour tous</p></footer>';
        }
      });
    })();
  </script>
</body>
</html>
