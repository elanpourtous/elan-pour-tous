<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Élan pour tous - Contact</title>
  <meta name="description" content="Contactez Élan pour tous pour toute information, question ou inscription. Nous sommes à votre écoute.">
</head>

<body>
  <!-- Skip-link -->
  <a href="#contenu" class="skip-link">Aller au contenu</a>

  <!-- HEADER dynamique -->
  <div id="header-placeholder" role="banner"></div>

  <main id="contenu" class="container hero" role="main">
    <h1>Contactez-nous</h1>
    <p>Pour toute question, information ou demande d'inscription, n'hésitez pas à nous écrire. Réponse rapide garantie.</p>

    <!-- Message d’état -->
    <p class="form-status" role="status" aria-live="polite" hidden></p>

    <!-- Formulaire (Formspree) -->
    <form id="contact-form"
          action="https://formspree.io/f/VOTRE_ID_FORM"  <!-- ⇦ remplace ici -->
          method="POST"
          class="contact-form"
          aria-label="Formulaire de contact"
          novalidate>

      <!-- Honeypot anti-spam -->
      <div class="visually-hidden" aria-hidden="true">
        <label for="company">Société</label>
        <input type="text" id="company" name="company" tabindex="-1" autocomplete="off">
      </div>

      <input type="hidden" name="_subject"  value="Nouveau message – Élan pour tous">
      <input type="hidden" name="_language" value="fr">

      <label for="name">Nom <span class="badge-req" aria-hidden="true">*</span></label>
      <input type="text" id="name" name="name" required aria-required="true" autocomplete="name" aria-describedby="hint-name">
      <p id="hint-name" class="field-hint">Indiquez vos nom et prénom.</p>

      <label for="email">Email <span class="badge-req" aria-hidden="true">*</span></label>
      <input type="email" id="email" name="email" required aria-required="true" autocomplete="email" aria-describedby="hint-email">
      <p id="hint-email" class="field-hint">Nous ne partagerons pas votre adresse.</p>

      <label for="message">Message <span class="badge-req" aria-hidden="true">*</span></label>
      <textarea id="message" name="message" rows="5" required aria-required="true" aria-describedby="hint-message"></textarea>
      <p id="hint-message" class="field-hint">Précisez votre demande (contexte, besoins, dates…)</p>

      <button type="submit" class="btn">Envoyer</button>
    </form>

    <section class="contact-info" aria-labelledby="infos">
      <h2 id="infos">Nos coordonnées</h2>
      <p><strong>Email :</strong> <a href="mailto:elanpourtous49@gmail.com">elanpourtous49@gmail.com</a></p>
      <p><strong>Téléphone :</strong> <a href="tel:+33783336757">07 83 33 67 57</a></p>
      <p><strong>Adresse :</strong> 18 rue des Menhirs - 49400 BAGNEUX - France</p>
    </section>
  </main>

  <!-- FOOTER dynamique -->
  <div id="footer-placeholder" role="contentinfo"></div>

  <!-- Injecte head + header + footer + JS globaux -->
  <script src="assets/js/include.js" defer></script>

  <!-- Envoi AJAX Formspree (statut accessible) -->
  <script>
    (function(){
      document.addEventListener('DOMContentLoaded', function(){
        const form   = document.getElementById('contact-form');
        const status = document.querySelector('.form-status');
        if(!form || !status) return;

        form.addEventListener('submit', async (e) => {
          e.preventDefault();
          const data = new FormData(form);
          // honeypot
          if ((data.get('company')||'').trim() !== '') return;

          status.hidden = false;
          status.textContent = 'Envoi en cours…';

          try {
            const res = await fetch(form.action, { method:'POST', body:data, headers:{ 'Accept':'application/json' }});
            if (res.ok) {
              status.textContent = 'Votre message a bien été envoyé. Merci !';
              form.reset();
            } else {
              status.textContent = 'Oups, un souci est survenu. Réessayez ou écrivez à elanpourtous49@gmail.com';
            }
          } catch(err) {
            status.textContent = 'Connexion impossible. Vérifiez votre réseau, puis réessayez.';
          }
        });
      });
    })();
  </script>
</body>
</html>
